{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport axios from 'axios';\nconst GET_EMPLOYEES = `\nquery getEmployees {\n    employees{\n      employee_name\n      employee_age\n      employee_salary\n    }\n  }`;\n\nclass Employees extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"crawlData\", async event => {\n      event.preventDefault();\n      const {\n        employees\n      } = this.state;\n      await axios({\n        url: 'http://localhost:3000/graphql',\n        method: 'post',\n        data: {\n          mutation: `\n                mutation crawlEmployees {\n                    crawl{\n                      mess \n                      crawledEmployees {\n                        employee_name\n                        employee_age\n                        employee_salary\n                      }\n                    }\n                  }\n                `\n        }\n      }).then(res => {\n        console.log(res);\n      }).catch(err => console.log(err)); // const res = await axios.post('employees/crawl');\n      // const newEmployees = employees.concat(res.data);\n      // this.setState({\n      //     employees: newEmployees\n      // })\n    });\n\n    this.state = {\n      employees: this.props.employees ? this.props.employees : []\n    };\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(\"button\", {\n      onClick: this.crawlData\n    }, \"Crawl\"), __jsx(\"table\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Name\"), __jsx(\"th\", null, \"Age\"), __jsx(\"th\", null, \"Salary\")), this.state.employees || this.state.employees !== [] ? this.state.employees.map((e, i) => {\n      return __jsx(\"tr\", {\n        key: i\n      }, __jsx(\"td\", null, e.employee_name), __jsx(\"td\", null, e.employee_age), __jsx(\"td\", null, e.employee_salary));\n    }) : null));\n  }\n\n}\n\nexport async function getServerSideProps(ctx) {\n  return await axios({\n    url: 'http://localhost:3000/graphql',\n    method: 'post',\n    data: {\n      query: `\n            query getEmployees {\n                employees{\n                  employee_name\n                  employee_age\n                  employee_salary\n                }\n              }`\n    }\n  }).then(res => {\n    return {\n      props: {\n        employees: res.data.data.employees\n      }\n    };\n  }).catch(err => console.log(err));\n}\nexport default Employees;","map":{"version":3,"sources":["/home/hamsa/training/GraphQL-RennyKa/pages/employees.js"],"names":["React","axios","GET_EMPLOYEES","Employees","Component","constructor","props","event","preventDefault","employees","state","url","method","data","mutation","then","res","console","log","catch","err","render","crawlData","map","e","i","employee_name","employee_age","employee_salary","getServerSideProps","ctx","query"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,aAAa,GAAI;;;;;;;IAAvB;;AASA,MAAMC,SAAN,SAAwBH,KAAK,CAACI,SAA9B,CAAwC;AACpCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,uCAOP,MAAOC,KAAP,IAAiB;AACzBA,MAAAA,KAAK,CAACC,cAAN;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAgB,KAAKC,KAA3B;AACA,YAAMT,KAAK,CAAC;AACRU,QAAAA,GAAG,EAAE,+BADG;AAERC,QAAAA,MAAM,EAAE,MAFA;AAGRC,QAAAA,IAAI,EAAE;AACFC,UAAAA,QAAQ,EAAG;;;;;;;;;;;;AADT;AAHE,OAAD,CAAL,CAiBHC,IAjBG,CAiBEC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,OAnBK,EAmBHG,KAnBG,CAmBGC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAnBV,CAAN,CAHyB,CAuBzB;AACA;AACA;AACA;AACA;AACH,KAnCkB;;AAEf,SAAKV,KAAL,GAAa;AACTD,MAAAA,SAAS,EAAE,KAAKH,KAAL,CAAWG,SAAX,GAAuB,KAAKH,KAAL,CAAWG,SAAlC,GAA8C;AADhD,KAAb;AAGH;;AAgCDY,EAAAA,MAAM,GAAG;AACL,WACI,4BACI;AAAQ,MAAA,OAAO,EAAE,KAAKC;AAAtB,eADJ,EAEI,qBACI,kBACI,yBADJ,EAEI,wBAFJ,EAGI,2BAHJ,CADJ,EAMK,KAAKZ,KAAL,CAAWD,SAAX,IAAwB,KAAKC,KAAL,CAAWD,SAAX,KAAyB,EAAjD,GAAsD,KAAKC,KAAL,CAAWD,SAAX,CAAqBc,GAArB,CAAyB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACtF,aACI;AAAI,QAAA,GAAG,EAAEA;AAAT,SACI,kBAAKD,CAAC,CAACE,aAAP,CADJ,EAEI,kBAAKF,CAAC,CAACG,YAAP,CAFJ,EAGI,kBAAKH,CAAC,CAACI,eAAP,CAHJ,CADJ;AAOH,KARsD,CAAtD,GAQI,IAdT,CAFJ,CADJ;AAqBH;;AA5DmC;;AA+DxC,OAAO,eAAeC,kBAAf,CAAkCC,GAAlC,EAAuC;AAC1C,SAAO,MAAM7B,KAAK,CAAC;AACfU,IAAAA,GAAG,EAAE,+BADU;AAEfC,IAAAA,MAAM,EAAE,MAFO;AAGfC,IAAAA,IAAI,EAAE;AACFkB,MAAAA,KAAK,EAAG;;;;;;;;AADN;AAHS,GAAD,CAAL,CAaVhB,IAbU,CAaLC,GAAG,IAAI;AACX,WAAO;AACHV,MAAAA,KAAK,EAAE;AACHG,QAAAA,SAAS,EAAEO,GAAG,CAACH,IAAJ,CAASA,IAAT,CAAcJ;AADtB;AADJ,KAAP;AAKH,GAnBY,EAmBVU,KAnBU,CAmBJC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAnBH,CAAb;AAqBH;AACD,eAAejB,SAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nconst GET_EMPLOYEES = `\nquery getEmployees {\n    employees{\n      employee_name\n      employee_age\n      employee_salary\n    }\n  }`\n\nclass Employees extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            employees: this.props.employees ? this.props.employees : []\n        }\n    }\n\n    crawlData = async (event) => {\n        event.preventDefault();\n        const { employees } = this.state;\n        await axios({\n            url: 'http://localhost:3000/graphql',\n            method: 'post',\n            data: {\n                mutation: `\n                mutation crawlEmployees {\n                    crawl{\n                      mess \n                      crawledEmployees {\n                        employee_name\n                        employee_age\n                        employee_salary\n                      }\n                    }\n                  }\n                `\n            }\n        }).then(res => {\n            console.log(res);\n        }).catch(err => console.log(err))\n        // const res = await axios.post('employees/crawl');\n        // const newEmployees = employees.concat(res.data);\n        // this.setState({\n        //     employees: newEmployees\n        // })\n    }\n\n    render() {\n        return (\n            <>\n                <button onClick={this.crawlData}>Crawl</button>\n                <table>\n                    <tr>\n                        <th>Name</th>\n                        <th>Age</th>\n                        <th>Salary</th>\n                    </tr>\n                    {this.state.employees || this.state.employees !== [] ? this.state.employees.map((e, i) => {\n                        return (\n                            <tr key={i}>\n                                <td>{e.employee_name}</td>\n                                <td>{e.employee_age}</td>\n                                <td>{e.employee_salary}</td>\n                            </tr>\n                        )\n                    }) : null}\n                </table>\n            </>\n        )\n    }\n}\n\nexport async function getServerSideProps(ctx) {\n    return await axios({\n        url: 'http://localhost:3000/graphql',\n        method: 'post',\n        data: {\n            query: `\n            query getEmployees {\n                employees{\n                  employee_name\n                  employee_age\n                  employee_salary\n                }\n              }`\n        }\n    }).then(res => {\n        return {\n            props: {\n                employees: res.data.data.employees\n            }\n        }\n    }).catch(err => console.log(err))\n\n}\nexport default Employees"]},"metadata":{},"sourceType":"module"}